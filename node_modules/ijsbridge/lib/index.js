"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebBridgeApi=exports.setDevelopmentMode=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_define=require("./define"),_state=require("./state"),_native=require("./native");require("./interface");var _R=function(e){return(0,_state.__log)("result is",e),{err:"",result:e}},_BetaData={pic:"http://pic136.nipic.com/file/20170725/10673188_152559977000_2.jpg",video:"http://pic136.nipic.com/file/20170725/10673188_152559977000_2.mp4"},setDevelopmentMode=function(e){(0,_state.__set_mode)(e?_define.BridgeMode.Development:_define.BridgeMode.Production)};exports.setDevelopmentMode=setDevelopmentMode;var WebBridgeApi={requestApi:_native.__request,defineApi:_native.__define,ping:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)("ping",e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",e);case 5:case"end":return r.stop()}}),r)})))()},requireVersion:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.requireVersion,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",e);case 5:case"end":return r.stop()}}),r)})))()},sysinfo:function(){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function e(){return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){e.next=4;break}return e.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.sysinfo,{});case 3:return e.abrupt("return",e.sent);case 4:return(0,_state.__log)("sysinfo dev"),e.abrupt("return",_R({Brand:"品牌",SystemName:"系统名称",SystemVersion:"系统版本",BundleId:"报名",ApplicationName:"APP名称",BuildNumber:"编译版本",Version:"版本",ReadableVersion:"完整版本",DeviceName:"设备名称",UserAgent:"Agent",Carrier:"运营商",NetInfo:"网络环境",Config:{}}));case 6:case"end":return e.stop()}}),e)})))()},scanCode:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.scanCode,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(""+(new Date).valueOf()));case 5:case"end":return r.stop()}}),r)})))()},authorize:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.authorize,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R({avatar:_BetaData.pic,islock:"0",isslient:"0",nickname:"昵称",phone:"13000000000",token:"yuUeDo5kaomEebwgnkJZWdNg33XU+ZT2a6KhDLfvdDEV/HoW/v/TBXa1WbK1yc0q"}));case 5:case"end":return r.stop()}}),r)})))()},getUserInfo:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.getUserInfo,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R({avatar:_BetaData.pic,islock:"0",isslient:"0",nickname:"昵称",phone:"13000000000",token:"yuUeDo5kaomEebwgnkJZWdNg33XU+ZT2a6KhDLfvdDEV/HoW/v/TBXa1WbK1yc0q"}));case 5:case"end":return r.stop()}}),r)})))()},fetch:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.fetch,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R({header:{},body:"hello world"}));case 5:case"end":return r.stop()}}),r)})))()},request:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.request,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R({header:{},body:"hello world"}));case 5:case"end":return r.stop()}}),r)})))()},router:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.router,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},showWebApp:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.showWebApp,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},showToast:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.showToast,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},showDialog:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.showDialog,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(1));case 5:case"end":return r.stop()}}),r)})))()},chooseImage:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.chooseImage,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(_BetaData.pic));case 5:case"end":return r.stop()}}),r)})))()},chooseVideo:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.chooseVideo,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(_BetaData.video));case 5:case"end":return r.stop()}}),r)})))()},showImageViewer:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.showImageViewer,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},showFullVideoPlayer:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.showFullVideoPlayer,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},requestFullscreenVideoPlay:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.requestFullscreenVideoPlay,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},checkPermission:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.checkPermission,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},audioRecord:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.audioRecord,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},share:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.share,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},openLink:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.openLink,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},showPickerMenu:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.showPickerMenu,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},launchWechatProgram:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.launchWechatProgram,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},getCurrentPosition:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.getCurrentPosition,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},registerAppEvent:function(e,r){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function t(){return _regenerator.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){t.next=3;break}return(0,_native.__request_callback)(_define.WebBridgeApiConstants.registerAppEvent,e,(function(){"function"==typeof r&&r.apply(void 0,arguments)})),t.abrupt("return");case 3:"function"==typeof r&&r(_R(!0));case 4:case"end":return t.stop()}}),t)})))()},unRegisterAppEvent:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.unRegisterAppEvent,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},triggerAppEvent:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.triggerAppEvent,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},orientation:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.orientation,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},connectDlna:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.connectDlna,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()},musicControl:function(e){return(0,_asyncToGenerator2.default)(_regenerator.default.mark((function r(){return _regenerator.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,_state.__get_mode)()!=_define.BridgeMode.Production){r.next=4;break}return r.next=3,(0,_native.__request)(_define.WebBridgeApiConstants.musicControl,e);case 3:return r.abrupt("return",r.sent);case 4:return r.abrupt("return",_R(!0));case 5:case"end":return r.stop()}}),r)})))()}};exports.WebBridgeApi=WebBridgeApi;